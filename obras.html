<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Fauvsmo</title>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.1/css/all.min.css'>
	<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Montserrat&amp;display=swap"rel="stylesheet'>
  <link href='https://fonts.googleapis.com/css?family=Rubik One' rel='stylesheet'>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
  <link rel="stylesheet" href="estilos.css">
  <link rel="stylesheet" href="obras.css">
</head>

<body>
  <header>
    <nav class="navbar fixed-top">
        <div class="container-fluid fixed">
          <a class="navbar-brand" href="index.html"><img style="width: 50px;" src="resources/logof.png"></a>
          <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar" aria-controls="offcanvasNavbar" aria-label="Toggle navigation" style="
          color: white;
      ">
          <span class="navbar-toggler-icon custom-icon"></span>
      </button>
          <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar" aria-labelledby="offcanvasNavbarLabel">
            <div class="offcanvas-header">
              <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
            </div>
            <div class="offcanvas-body">
              <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                <li class="nav-item">
                  <a class="nav-link active" aria-current="page" href="index.html">Home</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" href="contacto.html">Contacto</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="obras.html">Obras</a>
                  </li>
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                    Artistas
                  </a>
                  <ul class="dropdown-menu">
                    <li><a class="dropdown-item" href="matisse.html">MATISSE</a></li>
                    <li><a class="dropdown-item" href="derain.html">ANDRE DERAIN</a></li>
                    <li><a class="dropdown-item" href="vlamink.html">VLAMINCK</a></li>  
                     <li><a class="dropdown-item" href="dufy.html">DUFY</a></li>
                  </ul>
                </li>
              </ul>
              <form class="d-flex mt-3" role="search">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success" type="submit">Search</button>
              </form>
            </div>
          </div>
        </div>
      </nav>   
    
</header>
  <div class="app">
    <h1 style="font-size: 100px; font-family:'Rubik One';color: #fff; margin-bottom: 600px;" >OBRAS</h1>
    <div class="cardList">
      <button class="cardList__btn btn btn--left">
        <div class="icon">
          <svg>
            <use xlink:href="#arrow-left"></use>
          </svg>
        </div>
      </button>
  
      <div class="cards__wrapper">
        <div class="card current--card">
          <div class="card__image">
            <img src="resources/niña leyendo matisse.jpeg" alt="" />
          </div>
        </div>
  
        <div class="card next--card">
          <div class="card__image">
            <img src="resources/masterpiece2.jpg" alt="" />
          </div>
        </div>
  
        <div class="card previous--card">
          <div class="card__image">
            <img src="resources/VENTAMA.jpg" alt="" />
          </div>
        </div>
      </div>
  
      <button class="cardList__btn btn btn--right">
        <div class="icon">
          <svg>
            <use xlink:href="#arrow-right"></use>
          </svg>
        </div>
      </button>
    </div>
  
    <div class="infoList">
      <div class="info__wrapper" id="infoWrapper">
        <div class="info current--info">
          <h1 class="text name ">Interior con una chica leyendo</h1>
          <h4 class="text location">Matisse</h4>
          <p class="text description">El cuadro Interior con chica leyendo pintado por Henri Matisse es una obra que representa a una joven mujer absorta en la lectura de un libro en un interior vibrante y colorido. La figura de la chica resalta por su postura relajada y concentrada, mientras que el entorno está lleno de detalles que reflejan la paleta característica del artista francés, con colores brillantes y contrastantes.</p>
        </div>
        
        <div class="info next--info">
          <h1 class="text name">A FENÊTRE OUVERTE</h1>
          <h4 class="text location">MATISSE</h4>
          <p class="text description">La obra "La Raya Verde" de Matisse, presentada en el Salón de Otoño de 1905, desató la consternación del público. Una línea verde atraviesa el rostro de su esposa, Amélie, destacando entre los colores novedosos del fauvismo.</p>
        </div>
        
        <div class="info previous--info">
          <h1 class="text name">La Ventana Abierta</h1>
          <h4 class="text location"> Matisse</h4>
          <p class="text description">Representa un cambio radical en su arte. Inspirado por sus vacaciones en Colliure con Derain, adopta una libertad creativa sin restricciones. La obra muestra pinceladas enérgicas y una composición espontánea. Matisse abraza la emoción sobre la precisión, pero mantiene la coherencia con elementos como la perspectiva en las puertas inclinadas. Los colores son simbólicos y vivos, excepto el verde realista de las plantas.</p>
        </div>
        
      </div>
    </div>
    <div class="app__bg">
      <div class="app__bg__image current--image">
        <img src="resources/niña leyendo matisse.jpeg" alt="" />
      </div>
      <div class="app__bg__image next--image">
        <img src="resources/masterpiece2.jpg" alt="" />
      </div>
      <div class="app__bg__image previous--image">
        <img src="resources/VENTAMA.jpg" alt="" />
      </div>
    </div>
    
  </div>
</body>
  
  <svg class="icons" style="display: none;">
    <symbol id="arrow-left" xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'>
      <polyline points='328 112 184 256 328 400'
             style='fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:48px' />
    </symbol>
    <symbol id="arrow-right" xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'>
      <polyline points='184 112 328 256 184 400'
             style='fill:none;stroke:#fff;stroke-linecap:round;stroke-linejoin:round;stroke-width:48px' />
    </symbol>
  </svg>
    <script src='https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/gsap/3.3.3/gsap.min.js'></script><script  src="./script.js"></script>
  <script>console.clear();
  
     
      const buttons = {
          prev: document.querySelector(".btn--left"),
          next: document.querySelector(".btn--right"),
      };
      const cardsContainerEl = document.querySelector(".cards__wrapper");
      const appBgContainerEl = document.querySelector(".app__bg");
      
      const cardInfosContainerEl = document.querySelector(".info__wrapper");
      
      buttons.next.addEventListener("click", () => swapCards("right"));
      
      buttons.prev.addEventListener("click", () => swapCards("left"));
      
      function swapCards(direction) {
          const currentCardEl = cardsContainerEl.querySelector(".current--card");
          const previousCardEl = cardsContainerEl.querySelector(".previous--card");
          const nextCardEl = cardsContainerEl.querySelector(".next--card");
      
          const currentBgImageEl = appBgContainerEl.querySelector(".current--image");
          const previousBgImageEl = appBgContainerEl.querySelector(".previous--image");
          const nextBgImageEl = appBgContainerEl.querySelector(".next--image");
      
          changeInfo(direction);
          swapCardsClass();
      
          removeCardEvents(currentCardEl);
      
          function swapCardsClass() {
              currentCardEl.classList.remove("current--card");
              previousCardEl.classList.remove("previous--card");
              nextCardEl.classList.remove("next--card");
      
              currentBgImageEl.classList.remove("current--image");
              previousBgImageEl.classList.remove("previous--image");
              nextBgImageEl.classList.remove("next--image");
      
              currentCardEl.style.zIndex = "50";
              currentBgImageEl.style.zIndex = "-2";
      
              if (direction === "right") {
                  previousCardEl.style.zIndex = "20";
                  nextCardEl.style.zIndex = "30";
      
                  nextBgImageEl.style.zIndex = "-1";
      
                  currentCardEl.classList.add("previous--card");
                  previousCardEl.classList.add("next--card");
                  nextCardEl.classList.add("current--card");
      
                  currentBgImageEl.classList.add("previous--image");
                  previousBgImageEl.classList.add("next--image");
                  nextBgImageEl.classList.add("current--image");
              } else if (direction === "left") {
                  previousCardEl.style.zIndex = "30";
                  nextCardEl.style.zIndex = "20";
      
                  previousBgImageEl.style.zIndex = "-1";
      
                  currentCardEl.classList.add("next--card");
                  previousCardEl.classList.add("current--card");
                  nextCardEl.classList.add("previous--card");
      
                  currentBgImageEl.classList.add("next--image");
                  previousBgImageEl.classList.add("current--image");
                  nextBgImageEl.classList.add("previous--image");
              }
          }
      }
      
      function changeInfo(direction) {
          let currentInfoEl = cardInfosContainerEl.querySelector(".current--info");
          let previousInfoEl = cardInfosContainerEl.querySelector(".previous--info");
          let nextInfoEl = cardInfosContainerEl.querySelector(".next--info");
      
          gsap.timeline()
              .to([buttons.prev, buttons.next], {
              duration: 0.2,
              opacity: 0.5,
              pointerEvents: "none",
          })
              .to(
              currentInfoEl.querySelectorAll(".text"),
              {
                  duration: 0.4,
                  stagger: 0.1,
                  translateY: "-120px",
                  opacity: 0,
              },
              "-="
          )
              .call(() => {
              swapInfosClass(direction);
          })
              .call(() => initCardEvents())
              .fromTo(
              direction === "right"
              ? nextInfoEl.querySelectorAll(".text")
              : previousInfoEl.querySelectorAll(".text"),
              {
                  opacity: 0,
                  translateY: "40px",
              },
              {
                  duration: 0.4,
                  stagger: 0.1,
                  translateY: "0px",
                  opacity: 1,
              }
          )
              .to([buttons.prev, buttons.next], {
              duration: 0.2,
              opacity: 1,
              pointerEvents: "all",
          });
      
          function swapInfosClass() {
              currentInfoEl.classList.remove("current--info");
              previousInfoEl.classList.remove("previous--info");
              nextInfoEl.classList.remove("next--info");
      
              if (direction === "right") {
                  currentInfoEl.classList.add("previous--info");
                  nextInfoEl.classList.add("current--info");
                  previousInfoEl.classList.add("next--info");
              } else if (direction === "left") {
                  currentInfoEl.classList.add("next--info");
                  nextInfoEl.classList.add("previous--info");
                  previousInfoEl.classList.add("current--info");
              }
          }
      }
      
      function updateCard(e) {
          const card = e.currentTarget;
          const box = card.getBoundingClientRect();
          const centerPosition = {
              x: box.left + box.width / 2,
              y: box.top + box.height / 2,
          };
          let angle = Math.atan2(e.pageX - centerPosition.x, 0) * (35 / Math.PI);
          gsap.set(card, {
              "--current-card-rotation-offset": `${angle}deg`,
          });
          const currentInfoEl = cardInfosContainerEl.querySelector(".current--info");
          gsap.set(currentInfoEl, {
              rotateY: `${angle}deg`,
          });
      }
      
      function resetCardTransforms(e) {
          const card = e.currentTarget;
          const currentInfoEl = cardInfosContainerEl.querySelector(".current--info");
          gsap.set(card, {
              "--current-card-rotation-offset": 0,
          });
          gsap.set(currentInfoEl, {
              rotateY: 0,
          });
      }
      
      function initCardEvents() {
          const currentCardEl = cardsContainerEl.querySelector(".current--card");
          currentCardEl.addEventListener("pointermove", updateCard);
          currentCardEl.addEventListener("pointerout", (e) => {
              resetCardTransforms(e);
          });
      }
      
      initCardEvents();
      
      function removeCardEvents(card) {
          card.removeEventListener("pointermove", updateCard);
      }
      
      function init() {
      
          let tl = gsap.timeline();
      
          tl.to(cardsContainerEl.children, {
              delay: 0.15,
              duration: 0.5,
              stagger: {
                  ease: "power4.inOut",
                  from: "right",
                  amount: 0.1,
              },
              "--card-translateY-offset": "0%",
          })
              .to(cardInfosContainerEl.querySelector(".current--info").querySelectorAll(".text"), {
              delay: 0.5,
              duration: 0.4,
              stagger: 0.1,
              opacity: 1,
              translateY: 0,
          })
              .to(
              [buttons.prev, buttons.next],
              {
                  duration: 0.4,
                  opacity: 1,
                  pointerEvents: "all",
              },
              "-=0.4"
          );
      }
      
      const waitForImages = () => {
          const images = [...document.querySelectorAll("img")];
          const totalImages = images.length;
          let loadedImages = 0;
          const loaderEl = document.querySelector(".loader span");
      
          gsap.set(cardsContainerEl.children, {
              "--card-translateY-offset": "100vh",
          });
          gsap.set(cardInfosContainerEl.querySelector(".current--info").querySelectorAll(".text"), {
              translateY: "40px",
              opacity: 0,
          });
          gsap.set([buttons.prev, buttons.next], {
              pointerEvents: "none",
              opacity: "0",
          });
      
          images.forEach((image) => {
              imagesLoaded(image, (instance) => {
                  if (instance.isComplete) {
                      loadedImages++;
                      let loadProgress = loadedImages / totalImages;
      
                      gsap.to(loaderEl, {
                          duration: 1,
                          scaleX: loadProgress,
                          backgroundColor: `hsl(${loadProgress * 120}, 100%, 50%`,
                      });
      
                      if (totalImages == loadedImages) {
                          gsap.timeline()
                              .to(".loading__wrapper", {
                              duration: 0.8,
                              opacity: 0,
                              pointerEvents: "none",
                          })
                              .call(() => init());
                      }
                  }
              });
          });
      };
      
      waitForImages();</script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-..." crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script> // Script para desplegar la caja al hacer clic en "Artistas"
    document.addEventListener("DOMContentLoaded", function() {
        var artistasLink = document.querySelector("#navbarDropdown");
        var dropdownMenu = document.querySelector(".dropdown-menu");
    
        artistasLink.addEventListener("click", function(event) {
            event.preventDefault();
            dropdownMenu.classList.toggle("show");
        });
    });
    </script>
  </html>